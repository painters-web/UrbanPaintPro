<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>UrbanPaintPro | Professional Painting</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        :root { --primary: #673ab7; --gold: #d4af37; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); padding-bottom: 120px; overflow-x: hidden; }
        
        /* UC Style Navbar */
        .navbar { display: flex; justify-content: space-between; padding: 18px 6%; background: white; position: sticky; top: 0; z-index: 2000; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
        .logo { font-weight: 800; font-size: 1.4rem; }
        #auth-status { font-weight: 700; color: var(--primary); border: 2px solid; padding: 6px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; }

        /* Smart Calculator */
        .calc-card { background: white; margin: 20px 5%; padding: 25px; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); text-align: center; border-left: 5px solid var(--primary); }
        .calc-card select { width: 100%; padding: 14px; border-radius: 10px; border: 1px solid #eee; margin-bottom: 12px; outline: none; }
        .price-display { font-size: 1.8rem; font-weight: 800; display: block; margin: 15px 0; color: #000; }
        .main-book-btn { background: #000; color: #fff; border: none; width: 100%; padding: 16px; border-radius: 12px; font-weight: 700; cursor: pointer; }

        /* Asian Paints Categories */
        .tabs { display: flex; gap: 12px; padding: 15px 5%; overflow-x: auto; background: white; position: sticky; top: 68px; z-index: 1000; border-bottom: 1px solid #f0f0f0; scrollbar-width: none; }
        .tab { background: #f0f0f0; padding: 10px 22px; border-radius: 50px; font-size: 0.8rem; white-space: nowrap; cursor: pointer; font-weight: 600; color: #555; }
        .active-tab { background: var(--primary); color: white; }

        /* Product Cards */
        .card { display: flex; padding: 20px; margin: 15px 5%; border-radius: 16px; background: white; box-shadow: 0 2px 12px rgba(0,0,0,0.04); align-items: center; border: 1px solid #f1f1f1; }
        .info { flex: 1; padding-left: 15px; }
        .info h4 { margin: 0; font-size: 1rem; }
        .info span { color: var(--primary); font-weight: 800; font-size: 1.1rem; }
        .add-btn { background: white; color: var(--primary); border: 1.5px solid var(--primary); padding: 8px 18px; border-radius: 8px; font-weight: 700; cursor: pointer; }

        /* Modals */
        #auth-modal, #form-modal, #chat-window { display: none; position: fixed; z-index: 10000; }
        #auth-modal, #form-modal { top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; }
        .modal-box { background:white; padding:25px; border-radius:24px; width:85%; max-width:380px; text-align:center; }
        .modal-box input, .modal-box textarea { width:92%; padding:14px; margin:10px 0; border-radius:12px; border:1px solid #ddd; }
        
        /* Chat Robot UI */
        #chat-window { bottom: 100px; right: 20px; width: 320px; height: 400px; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); flex-direction: column; overflow: hidden; }
        #chat-messages { flex: 1; padding: 15px; overflow-y: auto; background: #f9f9f9; display: flex; flex-direction: column; gap: 8px; font-size: 0.9rem; }
        .bot-msg { background: #e0d5f5; padding: 10px; border-radius: 12px; align-self: flex-start; }
        .user-msg { background: var(--primary); color: white; padding: 10px; border-radius: 12px; align-self: flex-end; }

        /* Support FABs */
        .fab { position: fixed; width: 56px; height: 56px; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 5000; box-shadow: 0 4px 15px rgba(0,0,0,0.15); cursor: pointer; }
        #wa { bottom: 25px; right: 20px; background: #25d366; }
        #mail { bottom: 95px; right: 20px; background: #ea4335; }
        #robot-btn { bottom: 165px; right: 20px; background: var(--primary); }
    </style>
</head>
<body>

<div class="navbar">
    <div class="logo">Urban<span style="color:var(--primary);">PaintPro</span></div>
    <div id="auth-status">LogIn</div>
</div>

<div id="auth-modal">
    <div class="modal-box">
        <div style="display: flex; justify-content: space-around; margin-bottom: 20px;">
            <h4 id="t-login" onclick="toggleAuth(true)" style="cursor:pointer; color:var(--primary); border-bottom:2px solid var(--primary);">Login</h4>
            <h4 id="t-signup" onclick="toggleAuth(false)" style="cursor:pointer; color:#666;">Signup</h4>
        </div>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Password">
        <button class="main-book-btn" onclick="handleAuth()" id="auth-btn">Login Now</button>
        <div style="margin:15px 0;">OR</div>
        <button onclick="googleLogin()" style="width:100%; padding:12px; border-radius:12px; border:1px solid #ddd; background:white; cursor:pointer; font-weight:600;">Google Login</button>
        <p onclick="closeAuth()" style="color:red; margin-top:15px; cursor:pointer;">Cancel</p>
    </div>
</div>

<div id="form-modal">
    <div class="modal-box">
        <h3 id="srv-name">Confirm Booking</h3>
        <input type="text" id="c-name" placeholder="Aapka Naam">
        <input type="tel" id="c-phone" placeholder="Phone Number">
        <textarea id="c-addr" placeholder="Full Address"></textarea>
        <button class="main-book-btn" style="background:var(--primary);" onclick="saveOrder()">Confirm Order</button>
        <p onclick="closeBooking()" style="color:red; margin-top:15px; cursor:pointer;">Close</p>
    </div>
</div>

<div class="calc-card">
    <p style="color:#666; font-weight:600;">Smart Budget Estimator</p>
    <select id="t" onchange="runCalc()"><option value="1">Repaint</option><option value="2.6">Fresh Paint (New House)</option></select>
    <select id="p" onchange="runCalc()"><option value="42">Royale Luxury</option><option value="60">Royale Aspira</option><option value="16">Tractor Emulsion</option></select>
    <select id="s" onchange="runCalc()"><option value="400">1 BHK</option><option value="950">2 BHK</option><option value="1500">3 BHK</option></select>
    <span class="price-display" id="res">₹ 16,800</span>
    <button class="main-book-btn" onclick="openBooking('Custom Estimate')">Book Measurement Now</button>
</div>

<div class="tabs">
    <div class="tab active-tab" onclick="load('int', this)">Interior</div>
    <div class="tab" onclick="load('ext', this)">Exterior</div>
    <div class="tab" onclick="load('wp', this)">Waterproofing</div>
    <div class="tab" onclick="load('duco', this)">Duco/PU</div>
</div>

<div id="paint-list"></div>

<div id="robot-btn" class="fab" onclick="toggleChat()"><img src="https://cdn-icons-png.flaticon.com/512/4712/4712035.png" width="28" style="filter:invert(1);"></div>
<div id="mail" class="fab" onclick="window.open('mailto:urbanpaintpro.inbox@gmail.com')"><img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" width="28" style="filter:invert(1);"></div>
<div id="wa" class="fab" onclick="window.open('https://wa.me/919711904092')"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="32" style="filter:invert(1);"></div>

<div id="chat-window">
    <div style="background:var(--primary); color:white; padding:15px; font-weight:bold;">Urban AI Assistant</div>
    <div id="chat-messages"><div class="bot-msg">Namaste Arbaj! Main live hoon. Asian Paints ki range ke bare mein kuch bhi puchein.</div></div>
    <div style="padding:10px; display:flex; border-top:1px solid #eee;"><input type="text" id="chat-in" style="flex:1; padding:10px; border-radius:20px; border:1px solid #ddd;"><button onclick="sendMsg()" style="border:none; color:var(--primary); font-weight:700; margin-left:10px; background:none;">Send</button></div>
</div>

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyA2DT2ITLS2LgZF3yEkDA_K9kbPIsfpDig",
      authDomain: "professionalpainters-28488.firebaseapp.com",
      projectId: "professionalpainters-28488",
      storageBucket: "professionalpainters-28488.firebasestorage.app",
      messagingSenderId: "233510965012",
      appId: "1:233510965012:web:ccc02da0f3e86a3b4a7c01"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Login/Signup Logic
    let isLogin = true;
    function toggleAuth(l) { isLogin=l; document.getElementById('t-login').style.color=l?"var(--primary)":"#666"; document.getElementById('t-signup').style.color=l?"#666":"var(--primary)"; document.getElementById('auth-btn').innerText=l?"Login Now":"Create Account"; }
    function closeAuth() { document.getElementById('auth-modal').style.display='none'; }
    async function handleAuth() {
        const e=document.getElementById('email').value, p=document.getElementById('password').value;
        try { if(isLogin) await auth.signInWithEmailAndPassword(e,p); else await auth.createUserWithEmailAndPassword(e,p); closeAuth(); } catch(err){alert(err.message);}
    }
    async function googleLogin() { const p=new firebase.auth.GoogleAuthProvider(); await auth.signInWithPopup(p); closeAuth(); }
    
    auth.onAuthStateChanged(u => { 
        const b = document.getElementById('auth-status');
        b.innerText = u ? "Logout" : "LogIn";
        b.onclick = u ? () => auth.signOut() : () => document.getElementById('auth-modal').style.display='flex';
    });

    // Booking & Asian Paints Data
    let selSrv = "";
    function openBooking(s) { if(!auth.currentUser){alert("Pehle Login karein!"); return;} selSrv=s; document.getElementById('form-modal').style.display='flex'; }
    function closeBooking() { document.getElementById('form-modal').style.display='none'; }
    async function saveOrder() {
        const n=document.getElementById('c-name').value, p=document.getElementById('c-phone').value, a=document.getElementById('c-addr').value;
        if(!n||!p||!a) return alert("Fill all details");
        await db.collection("orders").add({ name:n, phone:p, address:a, service:selSrv, estimate:document.getElementById('res').innerText, time:new Date().toLocaleString() });
        alert("Booking Confirmed!"); closeBooking();
    }

    const asianData = {
        int: [{n:"Royale Aspira", p:"60"}, {n:"Royale Luxury", p:"42"}, {n:"Tractor Emulsion", p:"16"}],
        ext: [{n:"Apex Ultima Protek", p:"68"}, {n:"Apex Shyne", p:"34"}],
        wp: [{n:"Damp Proof Waterproofing", p:"75"}, {n:"SmartCare Leakage Repair", p:"55"}],
        duco: [{n:"PU Italian Polish", p:"450"}, {n:"Duco High Gloss", p:"260"}]
    };

    function load(cat, el) {
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active-tab'));
        el.classList.add('active-tab');
        let h = "";
        asianData[cat].forEach(p=>{
            h += `<div class="card"><div class="info"><h4>${p.n}</h4><span>₹${p.p}/sqft</span></div><button class="add-btn" onclick="openBooking('${p.n}')">Book</button></div>`;
        });
        document.getElementById('paint-list').innerHTML = h;
    }

    function runCalc() {
        let res = Math.round(document.getElementById('t').value * document.getElementById('p').value * document.getElementById('s').value);
        document.getElementById('res').innerText = "₹ " + res.toLocaleString('en-IN');
    }

    function toggleChat() { let w=document.getElementById('chat-window'); w.style.display=w.style.display==='flex'?'none':'flex'; }
    function sendMsg() { 
        let i=document.getElementById('chat-in'), m=document.getElementById('chat-messages'); 
        if(!i.value) return; m.innerHTML+=`<div class="user-msg">${i.value}</div>`; 
        setTimeout(()=>{ m.innerHTML+=`<div class="bot-msg">Asian Paints Royale Aspira best hai! Aap booking kar dein.</div>`; m.scrollTop=m.scrollHeight; }, 700); i.value=""; 
    }

    window.onload = () => { load('int', document.querySelector('.active-tab')); runCalc(); };
</script>
</body>
</html>
